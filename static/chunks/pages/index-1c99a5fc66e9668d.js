(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(3678)}])},3678:function(a,b,c){"use strict";c.r(b);var d=c(7568),e=c(797),f=c(4051),g=c.n(f),h=c(5893),i=c(4146),j=c(5553),k=c(7294),l=c(4152),m=c(9669),n=c.n(m),o=c(4491),p=function(a){var b=(0,k.useContext)(l.S),c=b.nftCollections,f=b.user,m=b.provider,p=(0,k.useState)([]),q=p[0],r=p[1],s=(0,k.useState)("not-loaded"),t=s[0],u=s[1],v=!1;function w(){return x.apply(this,arguments)}function x(){return(x=(0,d.Z)(g().mark(function b(){var f,h,k,l,p,s;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(v){b.next=20;break}if(!(c.length>0)){b.next=19;break}r([]),f=0;case 4:if(!(f<c.length)){b.next=17;break}return h=m.getSigner(),k=new i.CH(c[f][0],o.Mt,h),b.next=9,k.fetchMarketItems();case 9:return l=b.sent,b.next=12,Promise.all(l.map(function(){var b=(0,d.Z)(g().mark(function b(d){var e,h,i,l;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,k.tokenURI(d.tokenId);case 2:return e=b.sent,b.next=5,n().get(e);case 5:if(h=b.sent,i=j.formatUnits(d.price.toString(),"ether"),!h.data.name.startsWith(a.filters.s)){b.next=12;break}return l={price:i,tokenId:d.tokenId.toNumber(),seller:d.seller,owner:d.owner,image:h.data.image,name:h.data.name,collection:c[f][2],description:h.data.description,address:c[f][0],tokenUri:e},b.abrupt("return",l);case 12:return b.abrupt("return",{});case 13:case"end":return b.stop()}},b)}));return function(a){return b.apply(this,arguments)}}()));case 12:p=b.sent,r(function(a){return(0,e.Z)(a).concat((0,e.Z)(p))});case 14:f++,b.next=4;break;case 17:s=q.filter(function(a){return 0!==Object.keys(a).length}),("asc"===a.filters.sort||"desc"===a.filters.sort)&&(s.sort(function(b,c){var d=b.price-c.price;if(0===d)return 0;var e=Math.abs(d)/d;return"asc"===a.filters.sort?e:-e}),r((0,e.Z)(s)));case 19:u("loaded");case 20:case"end":return b.stop()}},b)}))).apply(this,arguments)}function y(){return(y=(0,d.Z)(g().mark(function a(b){var c,d,e,f;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=m.getSigner(),d=new i.CH(b.address,o.Mt,c),e=j.parseUnits(b.price.toString(),"ether"),a.next=5,d.createMarketSale(b.tokenId,{value:e});case 5:return f=a.sent,a.next=8,f.wait();case 8:v=!1,w();case 10:case"end":return a.stop()}},a)}))).apply(this,arguments)}return(0,k.useEffect)(function(){f&&c&&(w(),v=!0)},[f,c,a.filters]),(0,h.jsxs)("div",{children:[!f&&(0,h.jsx)("h2",{className:"px-20 py-10 text-3xl text-blue-400",children:"Metamask is not connected"}),f&&"loaded"===t&&0===q.length&&(0,h.jsx)("h1",{className:"px-20 py-10 text-3xl text-blue-400",children:"No items in marketplace"}),f&&"loaded"===t&&q.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h1",{className:"px-20 py-10 text-3xl text-blue-400",children:"Items in marketplace"}),(0,h.jsx)("div",{className:"flex justify-center",children:(0,h.jsx)("div",{className:"px-4",style:{maxWidth:"1300px"},children:(0,h.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 pt-4 ",children:q.map(function(a,b){return(0,h.jsxs)("div",{className:"border shadow rounded-xl overflow-hidden",children:[(0,h.jsx)("img",{className:"object-scale-down h-96 w-full",src:a.image,alt:a.name}),(0,h.jsxs)("div",{className:"p-4",children:[(0,h.jsx)("p",{className:"text-right",children:a.collection}),(0,h.jsx)("p",{className:"text-2xl font-semibold",children:a.name}),(0,h.jsx)("div",{children:(0,h.jsx)("p",{className:"text-gray-400",children:a.description})})]}),(0,h.jsxs)("div",{className:"p-4 relative bottom-0 bg-black",children:[(0,h.jsxs)("p",{className:"text-2xl font-bold text-white",children:[a.price," ETH"]}),(0,h.jsx)("button",{className:"mt-4 w-full bg-blue-800 text-white font-bold py-2 px-12 rounded",onClick:function(){return function(a){return y.apply(this,arguments)}(a)},children:"Buy"})]})]},b)})})})})]})]})};b.default=p}},function(a){a.O(0,[940,491,774,888,179],function(){var b;return a(a.s=5557)}),_N_E=a.O()}])