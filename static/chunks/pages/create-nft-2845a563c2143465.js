(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{6826:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-nft",function(){return c(1266)}])},1266:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return s}});var d=c(7568),e=c(1799),f=c(9396),g=c(797),h=c(4051),i=c.n(h),j=c(5893),k=c(5553),l=c(4146),m=c(7294),n=c(4152),o=c(9799),p=c(1163),q=c(4491),r=(0,o.Ue)("https://ipfs.infura.io:5001/api/v0");function s(){var a=(0,m.useContext)(n.S),b=a.factory,c=a.provider,h=a.nftCollections,o=a.user,s=a.formInput,t=a.updateFormInput,u=(0,m.useState)(null),v=u[0],w=u[1],x=(0,m.useState)([]),y=x[0],z=x[1],A=(0,m.useState)(!1),B=A[0],C=A[1],D=(0,m.useState)(!1),E=D[0],F=D[1],G=!1,H=(0,p.useRouter)();function I(){return J.apply(this,arguments)}function J(){return(J=(0,d.Z)(i().mark(function a(){var b,c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(c=0,b=function(a){var b=h[a];o===b[1]&&z(function(a){return(0,g.Z)(a).concat((0,g.Z)([[b[0],b[1],b[2],b[3]]]))})};c<h.length;c++)b(c);case 2:case"end":return a.stop()}},a)}))).apply(this,arguments)}function K(){return(K=(0,d.Z)(i().mark(function a(b){var c,d,e;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.target.files[0],a.prev=1,C(!0),a.next=5,r.add(c,{progress:function(a){return console.log("received: ".concat(a))}});case 5:d=a.sent,w(e="https://ipfs.infura.io/ipfs/".concat(d.path)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log("Error uploading file: ",a.t0);case 13:C(!1);case 14:case"end":return a.stop()}},a,null,[[1,10]])}))).apply(this,arguments)}function L(){return M.apply(this,arguments)}function M(){return(M=(0,d.Z)(i().mark(function a(){var b,c,d,e,f,g,h;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=s.name,c=s.description,d=s.price,e=s.collectionID,!(!b||!c||!d||!v||!e)){a.next=3;break}return a.abrupt("return");case 3:return f=JSON.stringify({name:b,description:c,image:v}),a.prev=4,a.next=7,r.add(f);case 7:return g=a.sent,h="https://ipfs.infura.io/ipfs/".concat(g.path),a.abrupt("return",h);case 12:a.prev=12,a.t0=a.catch(4),console.log("Error uploading file: ",a.t0);case 15:case"end":return a.stop()}},a,null,[[4,12]])}))).apply(this,arguments)}function N(){return(N=(0,d.Z)(i().mark(function a(){var b,d,e,f,g,h;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L();case 2:return b=a.sent,d=s.collectionID,e=c.getSigner(),f=k.parseUnits(s.price,"ether"),g=new l.CH(d,q.Mt,e),a.next=9,g.createToken(b,f);case 9:return h=a.sent,a.next=12,h.wait();case 12:F(!0);case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}(0,m.useEffect)(function(){(0,d.Z)(i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o&&b&&!G&&(z([]),I(),G=!0);case 2:case"end":return a.stop()}},a)}))()},[o]);var O=function(){F(!1),t({collectionID:""}),w(null)},P=function(){H.push("/collection")};return(0,j.jsx)("div",{className:"flex justify-center",children:(0,j.jsxs)("div",{className:"w-1/2 flex flex-col pb-12",children:[0===y.length&&(0,j.jsxs)("div",{className:"text-2xl py-2",children:[(0,j.jsx)("p",{children:"Before creating a nft, you need to create a collection"}),(0,j.jsx)("button",{onClick:P,className:"font-bold mt-4 bg-blue-800 text-white rounded p-4 shadow-lg",children:"Create a collection"})]}),y.length>0&&!E&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h2",{className:"text-2xl py-2",children:"Create a NFT"}),(0,j.jsx)("br",{}),(0,j.jsxs)("select",{className:"mt-2 border rounded p-4 bg-slate-200 text-slate-800 w-1/3",value:s.collectionID,onChange:function(a){return t({collectionID:a.target.value})},children:[(0,j.jsx)("option",{value:"",children:"Select a Collection"}),y.map(function(a){return(0,j.jsxs)("option",{value:a[0],children:[" ",a[2]," "]},a[0])})]})]}),E?(0,j.jsxs)("div",{children:[(0,j.jsx)("h2",{className:"text-2xl py-2",children:"NFT created !"}),(0,j.jsx)("button",{onClick:O,className:"font-bold mt-4 bg-blue-800 text-white rounded p-4 shadow-lg w-1/3",children:"Create another NFT"})]}):(0,j.jsx)(j.Fragment,{}),(0,j.jsx)(j.Fragment,{children:""===s.collectionID||E?(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("input",{placeholder:"NFT Name",className:"mt-8 border rounded p-4 placeholder:text-slate-600 bg-slate-200 text-slate-800 w-1/3",onChange:function(a){return t((0,f.Z)((0,e.Z)({},s),{name:a.target.value}))}}),(0,j.jsx)("textarea",{placeholder:"NFT Description",className:"mt-2 border rounded p-4 placeholder:text-slate-600 bg-slate-200 text-slate-800 w-1/3",onChange:function(a){return t((0,f.Z)((0,e.Z)({},s),{description:a.target.value}))}}),(0,j.jsx)("input",{placeholder:"NFT Price in Eth",className:"mt-2 border rounded p-4 placeholder:text-slate-600 bg-slate-200 text-slate-800 w-1/3",onChange:function(a){return t((0,f.Z)((0,e.Z)({},s),{price:a.target.value}))}}),(0,j.jsx)("input",{type:"file",name:"Asset",className:"my-4",onChange:function(a){return K.apply(this,arguments)}}),(0,j.jsx)("div",{children:v&&(0,j.jsx)("img",{className:"rounded mt-4",width:"350",src:v,alt:""})}),B?(0,j.jsx)("div",{children:(0,j.jsx)("p",{children:"Uploading image..."})}):(0,j.jsx)(j.Fragment,{}),""!==s.name&&""!==s.price&&""!==s.description&&v?(0,j.jsx)("button",{onClick:function(){return N.apply(this,arguments)},className:"font-bold mt-4 bg-blue-800 text-white rounded p-4 shadow-lg w-1/3",children:"Create NFT"}):(0,j.jsx)("p",{children:"All fields are required "})]})})]})})}},3897:function(){}},function(a){a.O(0,[588,491,774,888,179],function(){var b;return a(a.s=6826)}),_N_E=a.O()}])